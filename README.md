mysql知识

事务隔离级别由低到高:https://www.cnblogs.com/rjzheng/p/9950951.html

1 读未提交-> 造成脏读
2 读已提交-> 可避免脏读, 但造成不可重复读、幻读
3 可重复读(默认)-> 可避免脏读、不可重复读(因为读取的是某记录的快照), 但依然会存在幻读
4 串行化-> 可避免脏读、不可重复读、幻读的发生。

共享锁(S): 事务A加了共享锁,事务B只能加共享锁,而不能加排他锁
排他锁(X): 事务A加了排它锁,事务B既不能加共享锁,也不能加排他锁

普通select是不加任何锁的, 并且是快照读。但是! 当处于串行化隔离级别下, select语句都自动加上共享锁, 是当前读。
select ... lock in share mode 会加共享锁, 是当前读。
select ... for update 会加排他锁, 是当前读。

聚簇索引和非聚簇索引：https://blog.csdn.net/u013132035/article/details/82193763

“聚簇”的意思是数据行被按照一定顺序一个个紧密地排列在一起存储。一个表只能有一个聚簇索引，因为在一个表中数据的存放方式只有一种。
一般来说，将通过主键作为聚簇索引的索引列。
非聚簇索引（又叫二级索引）

聚簇索引的优点：
1.聚簇索引将索引和数据行保存在同一个B-Tree中，查询通过聚簇索引可以直接获取数据，相比非聚簇索引需要第二次查询（非覆盖索引的情况下）效率要高。
2.聚簇索引对于范围查询的效率很高，因为其数据是按照大小排列的，索引的顺序就是数据存放的顺序。

聚簇索引的缺点
1.聚簇索引的更新代价比较高，如果更新了行的聚簇索引列，就需要将数据移动到相应的位置。这可能因为要插入的页已满而导致“页分裂”。
2.插入速度严重依赖于插入顺序，按照主键进行插入的速度是加载数据到Innodb中的最快方式。如果不是按照主键插入，最好在加载完成后使用OPTIMIZE TABLE命令重新组织一下表。
3.聚簇索引在插入新行和更新主键时，可能导致“页分裂”问题。
4.聚簇索引可能导致全表扫描速度变慢，因为可能需要加载物理上相隔较远的页到内存中（需要耗时的磁盘寻道操作）。

非聚簇索引：
非聚簇索引，又叫二级索引。二级索引的叶子节点中保存的不是指向行的物理指针，而是行的主键值。当通过二级索引查找行，存储引擎需要在二级索引中找到相应的叶子节点，获得行的主键值，然后使用主键去聚簇索引中查找数据行，这需要两次B-Tree查找。

注意：Innodb的索引储存是聚簇索引。Innodb里面没有非聚簇索引，更加准确的叫法是辅助索引。非聚簇索引针对MyISAM引擎而言。
